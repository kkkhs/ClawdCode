# ç¬¬ 12d ç« ï¼šSkills ç³»ç»Ÿ

> æœ¬ç« å®ç° Skills ç³»ç»Ÿï¼Œè®© Agent å…·å¤‡å¯æ‰©å±•çš„ä¸“ä¸šèƒ½åŠ›ã€‚

## 12d.1 ä»€ä¹ˆæ˜¯ Skillsï¼Ÿ

Skills æ˜¯ ClawdCode çš„æ ¸å¿ƒæ‰©å±•æœºåˆ¶ï¼Œå…è®¸é€šè¿‡ Markdown æ–‡ä»¶ï¼ˆ`SKILL.md`ï¼‰å®šä¹‰ä¸“ä¸šèƒ½åŠ›ã€å·¥ä½œæµè§„èŒƒå’Œæœ€ä½³å®è·µã€‚

**ä¸ Slash Commands çš„åŒºåˆ«**ï¼š

| ç‰¹æ€§ | Slash Commands | Skills |
|------|----------------|--------|
| å®šä¹‰æ–¹å¼ | å•ä¸ª .md æ–‡ä»¶ | SKILL.md æ–‡ä»¶å¤¹ |
| è°ƒç”¨æ–¹å¼ | ä»…ç”¨æˆ· `/command` | AI è‡ªåŠ¨ + ç”¨æˆ·æ‰‹åŠ¨ |
| Token æ¶ˆè€— | æ‰§è¡Œæ—¶åŠ è½½ | **æ¸è¿›å¼æŠ«éœ²** |
| é€‚ç”¨åœºæ™¯ | å¿«æ·æ“ä½œ | ä¸“ä¸šèƒ½åŠ›/æœ€ä½³å®è·µ |

**è°ƒç”¨æ–¹å¼**ï¼š

- **AI è‡ªåŠ¨è°ƒç”¨**ï¼šAgent æ ¹æ® `description` è‡ªåŠ¨åˆ¤æ–­ä½•æ—¶ä½¿ç”¨
- **ç”¨æˆ·æ‰‹åŠ¨è°ƒç”¨**ï¼šé€šè¿‡ `/skills` å‘½ä»¤æŸ¥çœ‹å’Œç®¡ç†

## 12d.2 æ ¸å¿ƒæœºåˆ¶ï¼šæ¸è¿›å¼æŠ«éœ²

ä¸ºå¹³è¡¡ä¸Šä¸‹æ–‡çª—å£å’Œèƒ½åŠ›æ‰©å±•ï¼ŒSkills é‡‡ç”¨**æ¸è¿›å¼æŠ«éœ²ï¼ˆProgressive Disclosureï¼‰**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. å‘ç°é˜¶æ®µ                                                  â”‚
â”‚    ç³»ç»Ÿæç¤ºä»…åŒ…å« Skill åç§° + æè¿°ï¼ˆå‡ ä¹ä¸æ¶ˆè€— Tokenï¼‰         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. å†³ç­–é˜¶æ®µ                                                  â”‚
â”‚    Agent åŒ¹é…ç”¨æˆ·è¯·æ±‚ â†’ åˆ¤æ–­éœ€è¦æŸä¸ª Skill                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. åŠ è½½é˜¶æ®µ                                                  â”‚
â”‚    è°ƒç”¨ Skill å·¥å…· â†’ åŠ è½½å®Œæ•´ SKILL.md â†’ æ³¨å…¥ä¸Šä¸‹æ–‡           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. æ‰§è¡Œé˜¶æ®µ                                                  â”‚
â”‚    Agent éµå¾ª Skill æŒ‡ä»¤å®Œæˆä»»åŠ¡                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 12d.3 ä¸ºä»€ä¹ˆ Skill æ˜¯ä¸€ä¸ª Toolï¼Ÿ

è¿™æ˜¯ Skills ç³»ç»Ÿçš„æ ¸å¿ƒè®¾è®¡å†³ç­–ã€‚

### Agent ä¸å¤–éƒ¨ä¸–ç•Œäº¤äº’çš„å”¯ä¸€æ–¹å¼æ˜¯ Tools

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         LLM                             â”‚
â”‚  åªèƒ½ï¼š1. è¾“å‡ºæ–‡æœ¬  2. è°ƒç”¨ Tools (Function Calls)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚      Tool Calls        â”‚
              â”‚  - Read (è¯»æ–‡ä»¶)        â”‚
              â”‚  - Bash (æ‰§è¡Œå‘½ä»¤)      â”‚
              â”‚  - Skill (åŠ è½½æŠ€èƒ½) â†   â”‚  
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Agent æ— æ³•"ä¸»åŠ¨"åšä»»ä½•äº‹**ï¼Œå®ƒåªèƒ½ï¼š
1. è¾“å‡ºæ–‡æœ¬ç»™ç”¨æˆ·
2. è°ƒç”¨ Tools ä¸ç³»ç»Ÿäº¤äº’

å› æ­¤ï¼ŒSkill çš„"æ¿€æ´»"æœ¬è´¨ä¸Šæ˜¯ Agent **ä¸»åŠ¨è¯·æ±‚è·å–æ›´å¤šä¸Šä¸‹æ–‡**ï¼Œè¿™å¿…é¡»é€šè¿‡ Tool æœºåˆ¶å®ç°ã€‚

### Tool ä¸ Function Call çš„å…³ç³»

Tool åœ¨å‘é€ç»™ LLM API æ—¶ï¼Œä¼šè½¬æ¢æˆ **Function Call** æ ¼å¼ï¼š

```typescript
// ClawdCode ä¸­å®šä¹‰çš„ Tool
const skillTool = createTool({
  name: 'Skill',
  schema: z.object({
    skill: z.string(),
    args: z.string().optional(),
  }),
  // ...
});

// è½¬æ¢åå‘é€ç»™ OpenAI API çš„æ ¼å¼
{
  "tools": [{
    "type": "function",
    "function": {
      "name": "Skill",
      "description": "Load a skill for specialized instructions",
      "parameters": {
        "type": "object",
        "properties": {
          "skill": { "type": "string" },
          "args": { "type": "string" }
        },
        "required": ["skill"]
      }
    }
  }]
}

// LLM è¿”å›çš„ Function Call
{
  "tool_calls": [{
    "id": "call_abc123",
    "type": "function",
    "function": {
      "name": "Skill",
      "arguments": "{\"skill\": \"code-review\"}"
    }
  }]
}
```

è¿™ä¸ªæµç¨‹ï¼š

```
Tool å®šä¹‰ (Zod Schema)
        â†“ zodToJsonSchema()
JSON Schema (OpenAI tools æ ¼å¼)
        â†“ API è¯·æ±‚
LLM å†³ç­–
        â†“ API å“åº”
Function Call (tool_calls)
        â†“ è§£æ arguments
æ‰§è¡Œ Tool.execute()
        â†“
è¿”å›ç»“æœç»™ LLM
```

### æ¸è¿›å¼æŠ«éœ²çš„å®ç°æœºåˆ¶

```
ç³»ç»Ÿæç¤ºï¼ˆå¯åŠ¨æ—¶ï¼‰:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ # Available Skills                                      â”‚
â”‚ - code-review: å®¡æŸ¥ä»£ç è´¨é‡...                           â”‚  â† ä»…åç§°+æè¿°
â”‚ - commit-message: ç”Ÿæˆ commit...                        â”‚     (~100 tokens)
â”‚                                                         â”‚
â”‚ When a request matches a skill, use the Skill tool.     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ç”¨æˆ·: "å¸®æˆ‘å®¡æŸ¥è¿™ä¸ª PR"

Agent æ€è€ƒ: åŒ¹é…åˆ° code-review skillï¼Œéœ€è¦åŠ è½½å®Œæ•´æŒ‡ä»¤
         â†“
Agent è°ƒç”¨: Skill(skill="code-review")  â† è¿™æ˜¯ä¸€ä¸ª Tool Call
         â†“
Tool è¿”å›: å®Œæ•´çš„ SKILL.md å†…å®¹ (~2000 tokens)
         â†“
Agent: ç°åœ¨æœ‰äº†å®Œæ•´æŒ‡ä»¤ï¼Œå¼€å§‹æ‰§è¡Œ...
```

### ä¸ºä»€ä¹ˆä¸ç›´æ¥æŠŠ Skill å†…å®¹æ”¾è¿›ç³»ç»Ÿæç¤ºï¼Ÿ

| æ–¹æ¡ˆ | Token æ¶ˆè€— | é—®é¢˜ |
|------|-----------|------|
| å…¨éƒ¨æ”¾å…¥ç³»ç»Ÿæç¤º | 10 Skills Ã— 2000 = **20,000 tokens** | æµªè´¹ï¼Œå¤§å¤šæ•°ä¸ä¼šç”¨åˆ° |
| æ¸è¿›å¼æŠ«éœ² | 10 Ã— 50 + æŒ‰éœ€ = **500 + 2000** | é«˜æ•ˆï¼Œä»…åŠ è½½éœ€è¦çš„ |

### ç±»æ¯”ï¼šæŸ¥å­—å…¸

æŠŠ Skill Tool æƒ³è±¡æˆ**æŸ¥å­—å…¸**ï¼š

- **ç³»ç»Ÿæç¤º** = å­—å…¸ç›®å½•ï¼ˆåªæœ‰è¯æ¡åï¼‰
- **Skill Tool** = ç¿»åˆ°å…·ä½“é¡µé¢ï¼ˆè·å–å®Œæ•´è§£é‡Šï¼‰
- **Agent** = å­¦ç”Ÿï¼ˆæ ¹æ®éœ€è¦æŸ¥é˜…ï¼‰

è¿™æ · Agent çš„"ä¹¦åŒ…"ï¼ˆä¸Šä¸‹æ–‡çª—å£ï¼‰ä¸ç”¨è£…æ•´æœ¬å­—å…¸ï¼Œåªéœ€å¸¦ç›®å½•ï¼ŒæŒ‰éœ€æŸ¥é˜…ã€‚

## 12d.4 ç›®å½•ç»“æ„ä¸ä¼˜å…ˆçº§

Skills æŒ‰ä»¥ä¸‹ä¼˜å…ˆçº§æ‰«æï¼ˆååŠ è½½è¦†ç›–å…ˆåŠ è½½ï¼‰ï¼š

| ä¼˜å…ˆçº§ | èŒƒå›´ | è·¯å¾„ | è¯´æ˜ |
|--------|------|------|------|
| **æœ€é«˜** | é¡¹ç›®çº§ | `.clawdcode/skills/` | é¡¹ç›®ä¸“ç”¨ï¼Œå¯ Git å…±äº« |
| â†‘ | é¡¹ç›®çº§ | `.claude/skills/` | å…¼å®¹ Claude Code |
| â†‘ | ç”¨æˆ·çº§ | `~/.clawdcode/skills/` | ä¸ªäººå…¨å±€ Skills |
| â†‘ | ç”¨æˆ·çº§ | `~/.claude/skills/` | å…¼å®¹ Claude Code |
| **æœ€ä½** | å†…ç½® | (Built-in) | å†…ç½® Skills |

**ç›®å½•ç»“æ„**ï¼š

```
.clawdcode/skills/
â”œâ”€â”€ code-review/              # Skill åç§°ï¼ˆç›®å½•åï¼‰
â”‚   â”œâ”€â”€ SKILL.md              # [å¿…éœ€] æ ¸å¿ƒæŒ‡ä»¤
â”‚   â””â”€â”€ REFERENCE.md          # [å¯é€‰] å‚è€ƒæ–‡æ¡£
â””â”€â”€ commit-message/
    â””â”€â”€ SKILL.md
```

## 12d.5 SKILL.md è§„èŒƒ

`SKILL.md` ç”± **YAML Frontmatter** + **Markdown æ­£æ–‡** ç»„æˆï¼š

```markdown
---
name: code-review
description: å®¡æŸ¥ä»£ç è´¨é‡å’Œå®‰å…¨æ¼æ´ã€‚åœ¨ç”¨æˆ·è¯·æ±‚ Code Review æ—¶ä½¿ç”¨ã€‚
allowed-tools:
  - Read
  - Grep
  - Bash(git:*)
user-invocable: true
argument-hint: <file_path>
---

# Code Review æŒ‡å—

ä½ æ˜¯ä¸€ä½èµ„æ·±ä»£ç å®¡æŸ¥ä¸“å®¶ã€‚

## 1. è·å–å˜æ›´

```bash
git diff HEAD~1 --stat
```

## 2. å®¡æŸ¥é‡ç‚¹

- **å®‰å…¨æ€§**ï¼šSQL æ³¨å…¥ã€XSS
- **æ€§èƒ½**ï¼šN+1 æŸ¥è¯¢
- **å¯è¯»æ€§**ï¼šå‘½åæ¸…æ™°

## 3. è¾“å‡ºæ ¼å¼

| æ–‡ä»¶ | é—®é¢˜ | ä¸¥é‡ç¨‹åº¦ | å»ºè®® |
|------|------|----------|------|
```

**å…ƒæ•°æ®å­—æ®µ**ï¼š

| å­—æ®µ | å¿…å¡« | è¯´æ˜ |
|------|------|------|
| `name` | âœ… | å”¯ä¸€æ ‡è¯†ï¼Œå°å†™+æ•°å­—+è¿å­—ç¬¦ï¼Œâ‰¤64 å­—ç¬¦ |
| `description` | âœ… | â‰¤1024 å­—ç¬¦ï¼Œæè¿°åŠŸèƒ½å’Œè§¦å‘æ—¶æœº |
| `allowed-tools` | âŒ | å…è®¸çš„å·¥å…·ï¼Œå¦‚ `Bash(git:*)` |
| `user-invocable` | âŒ | æ˜¯å¦æ”¯æŒç”¨æˆ·è°ƒç”¨ï¼ˆé»˜è®¤ falseï¼‰ |
| `disable-model-invocation` | âŒ | ç¦æ­¢ AI è‡ªåŠ¨è°ƒç”¨ï¼ˆé»˜è®¤ falseï¼‰ |
| `argument-hint` | âŒ | å‚æ•°æç¤ºï¼Œå¦‚ `<file_path>` |
| `model` | âŒ | æŒ‡å®šæ‰§è¡Œæ¨¡å‹ |
| `when_to_use` | âŒ | é¢å¤–è§¦å‘æ¡ä»¶ |

## 12d.6 ç±»å‹å®šä¹‰

```typescript
// src/skills/types.ts

/** Skill æ¥æº */
export type SkillSource = 'user' | 'project' | 'builtin';

/** Skill å…ƒæ•°æ®ï¼ˆå¯åŠ¨æ—¶åŠ è½½ï¼‰ */
export interface SkillMetadata {
  name: string;
  description: string;
  allowedTools?: string[];
  argumentHint?: string;
  userInvocable: boolean;
  disableModelInvocation: boolean;
  model?: string;
  whenToUse?: string;
  source: SkillSource;
  path: string;
  basePath: string;
}

/** Skill å®Œæ•´å†…å®¹ï¼ˆæŒ‰éœ€åŠ è½½ï¼‰ */
export interface SkillContent {
  metadata: SkillMetadata;
  instructions: string;
}
```

## 12d.7 æ ¸å¿ƒå®ç°

### SkillLoader

è§£æ SKILL.md æ–‡ä»¶ï¼š

```typescript
// src/skills/SkillLoader.ts

export function parseSkillFile(content: string): ParsedSkillFile {
  const frontmatterRegex = /^---\n([\s\S]*?)\n---\n?([\s\S]*)$/;
  const match = content.match(frontmatterRegex);

  if (!match) {
    throw new Error('Invalid SKILL.md: missing frontmatter');
  }

  const frontmatter = yaml.parse(match[1]);
  
  // éªŒè¯å¿…å¡«å­—æ®µ
  if (!isValidSkillName(frontmatter.name)) {
    throw new Error('Invalid skill name');
  }

  return { frontmatter, body: match[2].trim() };
}
```

### SkillRegistry

å•ä¾‹æ³¨å†Œä¸­å¿ƒï¼š

```typescript
// src/skills/SkillRegistry.ts

export class SkillRegistry {
  private static instance: SkillRegistry | null = null;
  private skills: Map<string, SkillMetadata> = new Map();

  /** åˆå§‹åŒ–ï¼šæŒ‰ä¼˜å…ˆçº§æ‰«æç›®å½• */
  async initialize(workspaceRoot?: string): Promise<SkillDiscoveryResult> {
    this.loadBuiltinSkills();
    
    // æŒ‰ä¼˜å…ˆçº§æ‰«æï¼ˆååŠ è½½è¦†ç›–å…ˆåŠ è½½ï¼‰
    await this.scanDirectory('~/.claude/skills', 'user');
    await this.scanDirectory('~/.clawdcode/skills', 'user');
    await this.scanDirectory('.claude/skills', 'project');
    await this.scanDirectory('.clawdcode/skills', 'project');
    
    return { count: this.skills.size, /* ... */ };
  }

  /** æŒ‰éœ€åŠ è½½å®Œæ•´å†…å®¹ */
  async loadContent(name: string): Promise<SkillContent | null> {
    const metadata = this.skills.get(name);
    if (!metadata) return null;

    const content = await fs.readFile(metadata.path, 'utf-8');
    const { body } = parseSkillFile(content);

    return { metadata, instructions: body };
  }

  /** ç”Ÿæˆç³»ç»Ÿæç¤ºä¸­çš„ Skills åˆ—è¡¨ */
  generateAvailableSkillsList(): string {
    const skills = this.getModelInvocableSkills();
    return skills.map(s => `- ${s.name}: ${s.description}`).join('\n');
  }
}
```

### Skill å·¥å…·

Agent é€šè¿‡æ­¤å·¥å…·åŠ è½½ Skillï¼š

```typescript
// src/tools/builtin/skill.ts

export const skillTool = createTool({
  name: 'Skill',
  kind: ToolKind.ReadOnly,
  schema: z.object({
    skill: z.string().describe('The skill name to load'),
    args: z.string().optional(),
  }),

  description: {
    short: 'Load a skill for specialized instructions',
    long: `Load a skill to get specialized instructions for a task.
Use when a user request matches an available skill's description.`,
  },

  execute: async ({ skill, args }) => {
    const registry = getSkillRegistry();
    const content = await registry.loadContent(skill);

    if (!content) {
      return {
        success: false,
        llmContent: `Skill "${skill}" not found`,
        displayContent: `Skill not found: ${skill}`,
      };
    }

    let result = `## Skill: ${content.metadata.name}\n\n`;
    result += content.instructions;
    if (args) result += `\n\n## Arguments\n\n${args}`;

    return {
      success: true,
      llmContent: result,
      displayContent: `âœ“ Loaded skill: ${content.metadata.name}`,
    };
  },
});
```

## 12d.8 ç³»ç»Ÿæç¤ºé›†æˆ

```typescript
// src/prompts/builder.ts

// 3. å¯ç”¨ Skills åˆ—è¡¨
const skillRegistry = getSkillRegistry();
if (skillRegistry.isInitialized()) {
  const skillsList = skillRegistry.generateAvailableSkillsList();
  if (skillsList) {
    parts.push(`# Available Skills\n\n${skillsList}`);
  }
}
```

## 12d.9 `/skills` ç®¡ç†å‘½ä»¤

```typescript
// src/slash-commands/builtinCommands.ts

export const skillsCommand: SlashCommand = {
  name: 'skills',
  aliases: ['sk'],
  description: 'æŸ¥çœ‹å’Œç®¡ç† Skills',
  category: 'skills',
  usage: '/skills [name|refresh]',
};
```

**ç”¨æ³•**ï¼š

| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `/skills` | åˆ—å‡ºæ‰€æœ‰ Skillsï¼ˆæŒ‰æ¥æºåˆ†ç»„ï¼‰ |
| `/skills <name>` | æŸ¥çœ‹ç‰¹å®š Skill è¯¦æƒ… |
| `/skills refresh` | é‡æ–°æ‰«æå¹¶åŠ è½½ Skills |

**è¾“å‡ºç¤ºä¾‹**ï¼š

```
## ğŸ§  Skills (3)

### ğŸ“¦ å†…ç½®
- `skill-creator` - Create new Skills

### ğŸ‘¤ ç”¨æˆ·çº§
- `commit-message` âš¡ - Generate commit messages

### ğŸ“ é¡¹ç›®çº§
- `code-review` - Code review guidelines

---
ğŸ’¡ ä½¿ç”¨ `/skills <name>` æŸ¥çœ‹è¯¦æƒ… | âš¡ = ç”¨æˆ·å¯è°ƒç”¨
```

## 12d.10 å†…ç½® Skills

ClawdCode å†…ç½®ä¸€ä¸ª `skill-creator` Skillï¼Œå¸®åŠ©ç”¨æˆ·åˆ›å»ºæ–°çš„ Skillsï¼š

```typescript
const BUILTIN_SKILLS = new Map([
  ['skill-creator', {
    metadata: {
      name: 'skill-creator',
      description: 'Create new Skills for ClawdCode',
      source: 'builtin',
      userInvocable: false,
      disableModelInvocation: false,
    },
    instructions: `# Skill Creator Guide

Help users create new SKILL.md files following the specification...`,
  }],
]);
```

## 12d.11 ç¤ºä¾‹ï¼šCommit Message Skill

åˆ›å»º `.clawdcode/skills/commit-message/SKILL.md`ï¼š

```markdown
---
name: commit-message
description: ç”Ÿæˆ Conventional Commits æ ¼å¼çš„ commit messageã€‚
allowed-tools:
  - Bash(git:*)
  - Read
user-invocable: true
---

# Commit Message ç”ŸæˆæŒ‡å—

## 1. è·å–å˜æ›´

```bash
git diff --cached --stat
git diff --cached
```

## 2. Conventional Commits æ ¼å¼

```
<type>(<scope>): <subject>
```

**type**ï¼šfeat | fix | docs | style | refactor | test | chore

## 3. è§„åˆ™

- subject â‰¤ 50 å­—ç¬¦
- ç¥ˆä½¿è¯­æ°”ï¼ˆ"add" è€Œé "added"ï¼‰
- ä¸ä»¥å¥å·ç»“å°¾
```

**ä½¿ç”¨**ï¼š

```bash
# AI è‡ªåŠ¨è¯†åˆ«
> å¸®æˆ‘æäº¤ä»£ç 

# æŸ¥çœ‹è¯¦æƒ…
> /skills commit-message
```

## 12d.12 æœ€ä½³å®è·µ

1. **æè¿°è¦æ¸…æ™°**

   ```yaml
   # âŒ Bad
   description: "Code helper."
   
   # âœ… Good
   description: "å®¡æŸ¥ä»£ç è´¨é‡ã€‚åœ¨ç”¨æˆ·è¯·æ±‚ Code Review æ—¶ä½¿ç”¨ã€‚"
   ```

2. **æœ€å°æƒé™åŸåˆ™**

   ```yaml
   allowed-tools:
     - Read
     - Grep
     - Bash(git:*)  # ä»…å…è®¸ git å‘½ä»¤
   ```

3. **å›¢é˜Ÿå…±äº«**ï¼šå°† `.clawdcode/skills/` æäº¤åˆ° Git

4. **é€‰æ‹©è°ƒç”¨æ–¹å¼**ï¼š
   - é¢‘ç¹ä½¿ç”¨ï¼š`user-invocable: true`
   - ä»…æ‰‹åŠ¨è§¦å‘ï¼š`disable-model-invocation: true`

## 12d.13 Skills vs Subagents

| åœºæ™¯ | æ¨è | åŸå›  |
|------|------|------|
| ç‰¹å®šæ–¹æ³•/æ­¥éª¤ | Skills | æä¾›æŒ‡å— |
| ç‹¬ç«‹å­ä»»åŠ¡ | Subagents | å®Œæ•´æ‰§è¡Œ |
| ä»£ç å®¡æŸ¥å®è·µ | Skills | æŒ‡å¯¼å¦‚ä½•å®¡æŸ¥ |
| å¹¶è¡Œå¤šä»»åŠ¡ | Subagents | ç‹¬ç«‹æ‰§è¡Œ |

**ç®€å•è®°å¿†**ï¼š
- **Skills** = "å‘Šè¯‰æˆ‘æ€ä¹ˆåš"ï¼ˆæ–¹æ³•è®ºï¼‰
- **Subagents** = "å¸®æˆ‘å»åš"ï¼ˆæ‰§è¡Œè€…ï¼‰

## 12d.14 æµ‹è¯•æ–¹æ³•

### 1. åˆ›å»ºæµ‹è¯• Skill

```bash
mkdir -p ~/.clawdcode/skills/test-skill

cat > ~/.clawdcode/skills/test-skill/SKILL.md << 'EOF'
---
name: test-skill
description: A test skill for verification
---

# Test Skill

When activated, respond: "Test skill loaded!"
EOF
```

### 2. å¯åŠ¨å¹¶éªŒè¯

```bash
node dist/main.js --debug
```

åº”æ˜¾ç¤ºï¼š`[DEBUG] Loaded N skills`

### 3. æµ‹è¯•å‘½ä»¤

```
/skills              # åº”åˆ—å‡º test-skill
/skills test-skill   # åº”æ˜¾ç¤ºè¯¦æƒ…
/skills refresh      # é‡æ–°åŠ è½½
```

### 4. æµ‹è¯• AI è°ƒç”¨

```
> è¯·ä½¿ç”¨ test-skill
```

AI åº”è°ƒç”¨ Skill å·¥å…·å¹¶éµå¾ªæŒ‡ä»¤ã€‚

### 5. æ¸…ç†

```bash
rm -rf ~/.clawdcode/skills/test-skill
```

## 12d.15 ä¿®æ”¹çš„æ–‡ä»¶

| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `src/skills/types.ts` | ç±»å‹å®šä¹‰ |
| `src/skills/SkillLoader.ts` | SKILL.md è§£æå™¨ |
| `src/skills/SkillRegistry.ts` | æ³¨å†Œä¸­å¿ƒ |
| `src/skills/index.ts` | æ¨¡å—å¯¼å‡º |
| `src/tools/builtin/skill.ts` | Skill å·¥å…· |
| `src/prompts/builder.ts` | ç³»ç»Ÿæç¤ºæ³¨å…¥ |
| `src/slash-commands/builtinCommands.ts` | `/skills` å‘½ä»¤ |
| `src/slash-commands/types.ts` | æ·»åŠ  skills åˆ†ç±» |
| `src/ui/components/ClawdInterface.tsx` | åˆå§‹åŒ– Skills |

## 12d.16 TODO

- [ ] SkillInstaller è‡ªåŠ¨ä¸‹è½½å®˜æ–¹ Skills
- [ ] User-invocable Skills è‡ªåŠ¨ç”Ÿæˆ Slash Commands
- [ ] Skill æƒé™éªŒè¯ï¼ˆallowed-tools æ£€æŸ¥ï¼‰
