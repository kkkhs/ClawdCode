# Release Please - 自动化版本管理和 Changelog 生成
#
# 工作流程：
# 1. 每次 push 到 main，release-please 分析 commit
# 2. 自动创建/更新 Release PR（包含 CHANGELOG 和版本 bump）
# 3. 合并 PR 后，自动创建 GitHub Release 和 tag
# 4. Release 创建后触发 publish.yml 发布到 npm
#
# Commit 规范（Conventional Commits）：
# - feat: 新功能 → minor 版本
# - fix: 修复 → patch 版本
# - feat!: 或 BREAKING CHANGE → major 版本
# - docs/chore/refactor: 不触发版本更新

name: Release Please

on:
  push:
    branches:
      - main

permissions:
  contents: write
  pull-requests: write

jobs:
  release-please:
    runs-on: ubuntu-latest
    steps:
      - uses: google-github-actions/release-please-action@v4
        with:
          # Node.js 项目类型
          release-type: node
          # 包名（用于 changelog 标题）
          package-name: clawdcode
